CKEDITOR.dialog.add("simple-image-browser-dialog",function(){return{title:"Simple Image Browser",minWidth:800,minHeight:400,maxWidth:800,maxHeight:400,contents:[{id:"tab-step1",label:"Browse for images",elements:[{type:"html",align:"left",id:"titleid",style:"font-size: 20px; font-weight: bold;",html:"Browse for pictures"},{type:"html",align:"left",id:"msg",style:"",html:'<div id="imageBrowser"></div>'}]},{id:"tab-step3",label:"Upload",elements:[{type:"html",align:"left",id:"importtitleid",style:"font-size: 20px; font-weight: bold;",html:"Import Image"},{type:"html",align:"left",id:"importid",style:"position:relative;width:800px;",html:"<form enctype='multipart/form-data' method='post' autocomplete='off' id='form-upload'><input type='file' name='fileupload'><br/><br/><input type='submit' class='btn btn-info p-10' style='background:#1976d2' value='Upload Now'></form>"}]},{id:"tab-step2",label:"About this plugin",elements:[{type:"html",align:"left",id:"framepreviewtitleid",style:"font-size: 20px; font-weight: bold;",html:"About this author"},{type:"html",align:"left",id:"descriptionid",style:"position:relative;width:800px;",html:'<br /><br />Moikzz - BigDawgs<br /><br /><a href="https://www.facebook.com/moikzz214" target="_blank">Visit me >></a>'}]}]}}),CKEDITOR.plugins.add("simple-image-browser",{init:function(e){void 0===CKEDITOR.config.simpleImageBrowserListType&&(CKEDITOR.config.simpleImageBrowserListType="thumbnails"),e.on("dialogShow",function(e){"simple-image-browser-dialog"===e.data.getName()&&$.get(CKEDITOR.config.simpleImageBrowserURL,function(e){var t;return console.log(t),t=$.parseJSON(e),e="",$.each(t,function(t,i){e="thumbnails"===CKEDITOR.config.simpleImageBrowserListType?e+'<div class="lazy" data-src=\''+i.url+"'  onclick=\"CKEDITOR.tools.simpleimagebrowserinsertpicture('"+i.url+"');\" style=\"position:relative;width:145px;height:145px;margin-top:5px;margin-bottom:25px;margin-left:5px;margin-right:5px;background-repeat:no-repeat;background-size:125%;background-position:center center;float:left;\"><div style='bottom:-18px;position:absolute;width:inherit;overflow:hidden;'>"+i.title+"</div></div>":"link"}),$("#imageBrowser").html(e),$("#imageBrowser .lazy").lazy({appendScroll:$("#imageBrowser")})})}),e.addCommand("simple-image-browser-start",new CKEDITOR.dialogCommand("simple-image-browser-dialog")),CKEDITOR.tools.simpleimagebrowserinsertpicture=function(t){var i,o;console.log(t),window.app.postUpload(),e=CKEDITOR.currentInstance,i=CKEDITOR.dialog.getCurrent(),o='<img src="'+t+'" data-cke-saved-src="'+t+'" alt="'+t+'" />',e.config.allowedContent=!0,e.insertHtml(o.trim()),i.hide()},e.ui.addButton("Simple Image Browser",{label:"Simple Image Browser ",command:"simple-image-browser-start",icon:this.path+"images/icon.png"})}});